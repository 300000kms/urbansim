

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transition and Relocation Models &mdash; urbansim 3.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Model Related Utilities" href="util.html" />
    <link rel="prev" title="Supply and Demand Accounting" href="supplydemand.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> urbansim
          

          
          </a>

          
            
            
              <div class="version">
                3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Core Models</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#contents">Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="statistical.html">Statistical Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="supplydemand.html">Supply and Demand Accounting</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Transition and Relocation Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#control-table-formatting">Control Table Formatting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transition-model-notes">Transition Model Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="util.html">Model Related Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="urbanchoice.html">Location Choice Utilities</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Real Estate Development Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">UrbanSim Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maps/index.html">DataFrame Explorer</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">urbansim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Core Models</a> &raquo;</li>
        
      <li>Transition and Relocation Models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/models/transrelo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transition-and-relocation-models">
<span id="transition-relocation"></span><h1>Transition and Relocation Models<a class="headerlink" href="#transition-and-relocation-models" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Transition models are used to add (via copying) or remove rows from a table
based on prescribed rates or totals.
Relocation models are used to select movers from a table, also based on
prescribed rates.</p>
</div>
<div class="section" id="control-table-formatting">
<h2>Control Table Formatting<a class="headerlink" href="#control-table-formatting" title="Permalink to this headline">¶</a></h2>
<p>The tables of rates and totals used in transition and relocation models have
a particular format that allows them to specify different values for
different segments of the table. Below is an example table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">num_cars</span> <span class="n">num_children_min</span> <span class="n">num_children_max</span> <span class="n">relocation_rate</span>
       <span class="mi">0</span>              <span class="n">nan</span>                <span class="mi">2</span>            <span class="mf">0.08</span>
       <span class="mi">0</span>                <span class="mi">2</span>                <span class="mi">4</span>            <span class="mf">0.05</span>
       <span class="mi">0</span>                <span class="mi">4</span>              <span class="n">nan</span>            <span class="mf">0.03</span>
       <span class="mi">1</span>              <span class="n">nan</span>                <span class="mi">2</span>            <span class="mf">0.09</span>
       <span class="mi">1</span>                <span class="mi">2</span>                <span class="mi">4</span>            <span class="mf">0.04</span>
       <span class="mi">1</span>                <span class="mi">4</span>              <span class="n">nan</span>            <span class="mf">0.05</span>
</pre></div>
</div>
<p>Each column except the <code class="docutils literal notranslate"><span class="pre">relocation_rate</span></code> column describes a filter
on the table to which the rates will be applied. The column names are
inspected to determine the type of the filter and the table column
to which the filter applies.</p>
<p>Column names that end with <code class="docutils literal notranslate"><span class="pre">_min</span></code> indicate a “greater than or equal to”
filter. For example, the second row of the above table will have a filter
like <code class="docutils literal notranslate"><span class="pre">num_children</span> <span class="pre">&gt;=</span> <span class="pre">2</span></code>.</p>
<p>Column names that end with <code class="docutils literal notranslate"><span class="pre">_max</span></code> indicate a “less than” filter.
For example, the second row of the above table will have a filter like
<code class="docutils literal notranslate"><span class="pre">num_children</span> <span class="pre">&lt;</span> <span class="pre">4</span></code>. Notice that the maximum is not inclusive.</p>
<p>Column names that do not end in <code class="docutils literal notranslate"><span class="pre">_min</span></code> or <code class="docutils literal notranslate"><span class="pre">_max</span></code> indicate an
“equal to” filter. In the above table the first, second, and third rows
will have a filter like <code class="docutils literal notranslate"><span class="pre">num_cars</span> <span class="pre">==</span> <span class="pre">0</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">nan</span></code> values indicate filters that do not apply in a given row.</p>
</div>
<div class="section" id="transition-model-notes">
<h2>Transition Model Notes<a class="headerlink" href="#transition-model-notes" title="Permalink to this headline">¶</a></h2>
<p>Transition models have two components. The main interface is the
<a class="reference internal" href="#urbansim.models.transition.TransitionModel" title="urbansim.models.transition.TransitionModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransitionModel</span></code></a>, but it
is configured by providing a “transitioner”.
Transitioners can make transitions based on different inputs like
growth rates and control totals. Available transitioners are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#urbansim.models.transition.GrowthRateTransition" title="urbansim.models.transition.GrowthRateTransition"><code class="xref py py-class docutils literal notranslate"><span class="pre">GrowthRateTransition</span></code></a></p></li>
<li><p><a class="reference internal" href="#urbansim.models.transition.TabularGrowthRateTransition" title="urbansim.models.transition.TabularGrowthRateTransition"><code class="xref py py-class docutils literal notranslate"><span class="pre">TabularGrowthRateTransition</span></code></a></p></li>
<li><p><a class="reference internal" href="#urbansim.models.transition.TabularTotalsTransition" title="urbansim.models.transition.TabularTotalsTransition"><code class="xref py py-class docutils literal notranslate"><span class="pre">TabularTotalsTransition</span></code></a></p></li>
</ul>
<p>Or you could write and provide your own transitioner.
Transitioners are expected to be callable and take arguments of a
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe">DataFrame</a> with the data to transition and a year number.
They should return a new data table, the indexes of rows added,
the indexes of rows copied, and the indexes of rows removed.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="transition-api">
<h3>Transition API<a class="headerlink" href="#transition-api" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#urbansim.models.transition.GrowthRateTransition" title="urbansim.models.transition.GrowthRateTransition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GrowthRateTransition</span></code></a>(growth_rate[, …])</p></td>
<td><p>Transition given tables using a simple growth rate.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#urbansim.models.transition.TabularGrowthRateTransition" title="urbansim.models.transition.TabularGrowthRateTransition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TabularGrowthRateTransition</span></code></a>(growth_rates, …)</p></td>
<td><p>Growth rate based transitions where the rates are stored in a table indexed by year with optional segmentation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#urbansim.models.transition.TabularTotalsTransition" title="urbansim.models.transition.TabularTotalsTransition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TabularTotalsTransition</span></code></a>(targets, totals_column)</p></td>
<td><p>Transition data via control totals in pandas DataFrame with optional segmentation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#urbansim.models.transition.TransitionModel" title="urbansim.models.transition.TransitionModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TransitionModel</span></code></a>(transitioner)</p></td>
<td><p>Models things moving into or out of a region.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="relocation-api">
<h3>Relocation API<a class="headerlink" href="#relocation-api" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#urbansim.models.relocation.RelocationModel" title="urbansim.models.relocation.RelocationModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RelocationModel</span></code></a>(rates[, rate_column])</p></td>
<td><p>Find movers within a population according to a table of relocation rates.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-urbansim.models.transition">
<span id="transition-api-docs"></span><h3>Transition API Docs<a class="headerlink" href="#module-urbansim.models.transition" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">TransitionModel</span></code> class with the different transitioners to
add or remove agents based on growth rates or target totals.</p>
<dl class="py class">
<dt id="urbansim.models.transition.GrowthRateTransition">
<em class="property">class </em><code class="sig-prename descclassname">urbansim.models.transition.</code><code class="sig-name descname">GrowthRateTransition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">growth_rate</span></em>, <em class="sig-param"><span class="n">accounting_column</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#GrowthRateTransition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.GrowthRateTransition" title="Permalink to this definition">¶</a></dt>
<dd><p>Transition given tables using a simple growth rate.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>growth_rate</strong><span class="classifier">float</span></dt><dd></dd>
<dt><strong>accounting_column: string, optional</strong></dt><dd><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="urbansim.models.transition.GrowthRateTransition.transition">
<code class="sig-name descname">transition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">year</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#GrowthRateTransition.transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.GrowthRateTransition.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows to/from a table according to the prescribed
growth rate for this model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Rows will be removed from or added to this table.</p>
</dd>
<dt><strong>year</strong><span class="classifier">None, optional</span></dt><dd><p>Here for compatibility with other transition models,
but ignored.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>updated</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table with rows removed or added.</p>
</dd>
<dt><strong>added</strong><span class="classifier">pandas.Index</span></dt><dd><p>New indexes of the rows that were added.</p>
</dd>
<dt><strong>copied</strong><span class="classifier">pandas.Index</span></dt><dd><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</dd>
<dt><strong>removed</strong><span class="classifier">pandas.Index</span></dt><dd><p>Index of rows that were removed.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="urbansim.models.transition.TabularGrowthRateTransition">
<em class="property">class </em><code class="sig-prename descclassname">urbansim.models.transition.</code><code class="sig-name descname">TabularGrowthRateTransition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">growth_rates</span></em>, <em class="sig-param"><span class="n">rates_column</span></em>, <em class="sig-param"><span class="n">accounting_column</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TabularGrowthRateTransition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TabularGrowthRateTransition" title="Permalink to this definition">¶</a></dt>
<dd><p>Growth rate based transitions where the rates are stored in
a table indexed by year with optional segmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>growth_rates</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
<dt><strong>rates_column</strong><span class="classifier">str</span></dt><dd><p>Name of the column in <cite>growth_rates</cite> that contains the rates.</p>
</dd>
<dt><strong>accounting_column: string, optional</strong></dt><dd><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="urbansim.models.transition.TabularGrowthRateTransition.transition">
<code class="sig-name descname">transition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">year</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TabularGrowthRateTransition.transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TabularGrowthRateTransition.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows to/from a table according to the prescribed
growth rate for this model and year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Rows will be removed from or added to this table.</p>
</dd>
<dt><strong>year</strong><span class="classifier">None, optional</span></dt><dd><p>Here for compatibility with other transition models,
but ignored.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>updated</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table with rows removed or added.</p>
</dd>
<dt><strong>added</strong><span class="classifier">pandas.Index</span></dt><dd><p>New indexes of the rows that were added.</p>
</dd>
<dt><strong>copied</strong><span class="classifier">pandas.Index</span></dt><dd><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</dd>
<dt><strong>removed</strong><span class="classifier">pandas.Index</span></dt><dd><p>Index of rows that were removed.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="urbansim.models.transition.TabularTotalsTransition">
<em class="property">class </em><code class="sig-prename descclassname">urbansim.models.transition.</code><code class="sig-name descname">TabularTotalsTransition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">targets</span></em>, <em class="sig-param"><span class="n">totals_column</span></em>, <em class="sig-param"><span class="n">accounting_column</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TabularTotalsTransition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TabularTotalsTransition" title="Permalink to this definition">¶</a></dt>
<dd><p>Transition data via control totals in pandas DataFrame with
optional segmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>targets</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
<dt><strong>totals_column</strong><span class="classifier">str</span></dt><dd><p>Name of the column in <cite>targets</cite> that contains the control totals.</p>
</dd>
<dt><strong>accounting_column: string, optional</strong></dt><dd><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="urbansim.models.transition.TabularTotalsTransition.transition">
<code class="sig-name descname">transition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">year</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TabularTotalsTransition.transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TabularTotalsTransition.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows to/from a table according to the prescribed
totals for this model and year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Rows will be removed from or added to this table.</p>
</dd>
<dt><strong>year</strong><span class="classifier">None, optional</span></dt><dd><p>Here for compatibility with other transition models,
but ignored.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>updated</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table with rows removed or added.</p>
</dd>
<dt><strong>added</strong><span class="classifier">pandas.Index</span></dt><dd><p>New indexes of the rows that were added.</p>
</dd>
<dt><strong>copied</strong><span class="classifier">pandas.Index</span></dt><dd><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</dd>
<dt><strong>removed</strong><span class="classifier">pandas.Index</span></dt><dd><p>Index of rows that were removed.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="urbansim.models.transition.TransitionModel">
<em class="property">class </em><code class="sig-prename descclassname">urbansim.models.transition.</code><code class="sig-name descname">TransitionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transitioner</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TransitionModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TransitionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Models things moving into or out of a region.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>transitioner</strong><span class="classifier">callable</span></dt><dd><p>A callable that takes a data table and a year number and returns
and new data table, the indexes of rows added, the indexes
of rows copied, and the indexes of rows removed.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="urbansim.models.transition.TransitionModel.transition">
<code class="sig-name descname">transition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">linked_tables</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TransitionModel.transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TransitionModel.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows from a table based on population targets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Rows will be removed from or added to this table.</p>
</dd>
<dt><strong>year</strong><span class="classifier">int</span></dt><dd><p>Year number that will be passed to <cite>transitioner</cite>.</p>
</dd>
<dt><strong>linked_tables</strong><span class="classifier">dict of tuple, optional</span></dt><dd><p>Dictionary of (table, ‘column name’) pairs. The column name
should match the index of <cite>data</cite>. Indexes in <cite>data</cite> that
are copied or removed will also be copied and removed in
linked tables. They dictionary keys are used in the
returned <cite>updated_links</cite>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>updated</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table with rows removed or added.</p>
</dd>
<dt><strong>added</strong><span class="classifier">pandas.Series</span></dt><dd><p>Indexes of new rows in <cite>updated</cite>.</p>
</dd>
<dt><strong>updated_links</strong><span class="classifier">dict of pandas.DataFrame</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="urbansim.models.transition.add_or_remove_rows">
<code class="sig-prename descclassname">urbansim.models.transition.</code><code class="sig-name descname">add_or_remove_rows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">nrows</span></em>, <em class="sig-param"><span class="n">starting_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">accounting_column</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#add_or_remove_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.add_or_remove_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows to/from a table. Rows are added
for positive <cite>nrows</cite> and removed for negative <cite>nrows</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">DataFrame</span></dt><dd></dd>
<dt><strong>nrows</strong><span class="classifier">float</span></dt><dd><p>Number of rows to add or remove.</p>
</dd>
<dt><strong>starting_index</strong><span class="classifier">int, optional</span></dt><dd><p>The starting index from which to calculate indexes for new rows.
If not given the max + 1 of the index of <cite>data</cite> will be used.
(Not applicable if rows are being removed.)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>updated</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table with random rows removed.</p>
</dd>
<dt><strong>added</strong><span class="classifier">pandas.Index</span></dt><dd><p>New indexes of the rows that were added.</p>
</dd>
<dt><strong>copied</strong><span class="classifier">pandas.Index</span></dt><dd><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</dd>
<dt><strong>removed</strong><span class="classifier">pandas.Index</span></dt><dd><p>Index of rows that were removed.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="urbansim.models.transition.add_rows">
<code class="sig-prename descclassname">urbansim.models.transition.</code><code class="sig-name descname">add_rows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">nrows</span></em>, <em class="sig-param"><span class="n">starting_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">accounting_column</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#add_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.add_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Add rows to data table according to a given nrows.
New rows will have their IDs set to NaN.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
<dt><strong>nrows</strong><span class="classifier">int</span></dt><dd><p>Number of rows to add.</p>
</dd>
<dt><strong>starting_index</strong><span class="classifier">int, optional</span></dt><dd><p>The starting index from which to calculate indexes for the new
rows. If not given the max + 1 of the index of <cite>data</cite> will be used.</p>
</dd>
<dt><strong>accounting_column: string, optional</strong></dt><dd><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>updated</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table with rows added. New rows will have their index values
set to NaN.</p>
</dd>
<dt><strong>added</strong><span class="classifier">pandas.Index</span></dt><dd><p>New indexes of the rows that were added.</p>
</dd>
<dt><strong>copied</strong><span class="classifier">pandas.Index</span></dt><dd><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="urbansim.models.transition.remove_rows">
<code class="sig-prename descclassname">urbansim.models.transition.</code><code class="sig-name descname">remove_rows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">nrows</span></em>, <em class="sig-param"><span class="n">accounting_column</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#remove_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.remove_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a random <cite>nrows</cite> number of rows from a table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">DataFrame</span></dt><dd></dd>
<dt><strong>nrows</strong><span class="classifier">float</span></dt><dd><p>Number of rows to remove.</p>
</dd>
<dt><strong>accounting_column: string, optional</strong></dt><dd><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>updated</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table with random rows removed.</p>
</dd>
<dt><strong>removed</strong><span class="classifier">pandas.Index</span></dt><dd><p>Indexes of the rows removed from the table.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-urbansim.models.relocation">
<span id="relocation-api-docs"></span><h3>Relocation API Docs<a class="headerlink" href="#module-urbansim.models.relocation" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">RelocationModel</span></code> class to choose movers based on
relocation rates.</p>
<dl class="py class">
<dt id="urbansim.models.relocation.RelocationModel">
<em class="property">class </em><code class="sig-prename descclassname">urbansim.models.relocation.</code><code class="sig-name descname">RelocationModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rates</span></em>, <em class="sig-param"><span class="n">rate_column</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/relocation.html#RelocationModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.relocation.RelocationModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Find movers within a population according to a table of
relocation rates.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>rates</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table of relocation rates. Index is unused.</p>
<p>Other columns describe filters on the <cite>choosers</cite>
table so that different segments can have different relocation
rates. Columns that ends with ‘_max’ will be used to create
a “less than” filters, columns that end with ‘_min’ will be
used to create “greater than or equal to” filters.
A column with no suffix will be used to make an ‘equal to’ filter.</p>
<p>An example <cite>rates</cite> structure:</p>
<dl class="simple">
<dt>age_of_head_max  age_of_head_min</dt><dd><dl class="simple">
<dt>nan               65</dt><dd><p>65               40</p>
</dd>
</dl>
</dd>
</dl>
<p>In this example the <cite>choosers</cite> table would need to have an
‘age_of_head’ column on which to filter.</p>
<p>nan should be used to flag filters that do not apply
in a given row.</p>
</dd>
<dt><strong>rate_column</strong><span class="classifier">object, optional</span></dt><dd><p>Name of column in <cite>rates</cite> table that contains relocation rates.
If not given ‘probability_of_relocating’ is used.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="urbansim.models.relocation.RelocationModel.find_movers">
<code class="sig-name descname">find_movers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">choosers</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/relocation.html#RelocationModel.find_movers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.relocation.RelocationModel.find_movers" title="Permalink to this definition">¶</a></dt>
<dd><p>Select movers from among a table of <cite>choosers</cite> according to the
stored relocation rates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>choosers</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table of agents from which to find movers.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>movers</strong><span class="classifier">pandas.Index</span></dt><dd><p>Suitable for indexing <cite>choosers</cite> by index.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="urbansim.models.relocation.find_movers">
<code class="sig-prename descclassname">urbansim.models.relocation.</code><code class="sig-name descname">find_movers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">choosers</span></em>, <em class="sig-param"><span class="n">rates</span></em>, <em class="sig-param"><span class="n">rate_column</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/relocation.html#find_movers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.relocation.find_movers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array of the indexes of the <cite>choosers</cite> that are slated
to move.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>choosers</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table of agents from which to find movers.</p>
</dd>
<dt><strong>rates</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Table of relocation rates. Index is unused.</p>
<p>Other columns describe filters on the <cite>choosers</cite>
table so that different segments can have different relocation
rates. Columns that ends with ‘_max’ will be used to create
a “less than” filters, columns that end with ‘_min’ will be
used to create “greater than or equal to” filters.
A column with no suffix will be used to make an ‘equal to’ filter.</p>
<p>An example <cite>rates</cite> structure:</p>
<dl class="simple">
<dt>age_of_head_max  age_of_head_min</dt><dd><dl class="simple">
<dt>nan               65</dt><dd><p>65               40</p>
</dd>
</dl>
</dd>
</dl>
<p>In this example the <cite>choosers</cite> table would need to have an
‘age_of_head’ column on which to filter.</p>
<p>nan should be used to flag filters that do not apply
in a given row.</p>
</dd>
<dt><strong>rate_column</strong><span class="classifier">object</span></dt><dd><p>Name of column in <cite>rates</cite> table that has relocation rates.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>movers</strong><span class="classifier">pandas.Index</span></dt><dd><p>Suitable for indexing <cite>choosers</cite> by index.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="util.html" class="btn btn-neutral float-right" title="Model Related Utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="supplydemand.html" class="btn btn-neutral float-left" title="Supply and Demand Accounting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, UrbanSim Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>